# Home SOC Lab

The goal of this project is to set up a home lab utilizing virtualization, both as virtual machines in Virtual box but also container deployments in Docker compose. The intended use of this lab is to gain further understanding and experience with setting up security environment, but also configuring it, monitoring it, and protecting it from simulated threats. This will serve to strengthen Blue Team skills and experience but also provide an environment for Red Team exercises as well.

Throughout this project, the [NIST Cyber Security Framework](https://nvlpubs.nist.gov/nistpubs/CSWP/NIST.CSWP.29.pdf) will guide decisions and configurations that will be made to establish this environment.

Below is a table that outlines which servers are intended to be deployed, the services that will be available on them, the purpose of the server, how it is to be deployed and in what segmentation of the environment the system can be found.
| Server Name             | Service/User                                                  | OS                  | Roles                                              | Deployment | IP Address         | VLAN/Subnet           | Additional Applications              |
|-------------------------|---------------------------------------------------------------|---------------------|---------------------------------------------------|------------|--------------------|-----------------------|---------------------------------------|
| **Server 1: opnSense**   | OPNSense Firewall, OpenVPN, Suricata, Squid        | opnSense            | Firewall, IPS, routing, proxy, and VPN.           | VM         | 10.0.1.10          | Admin_VLAN (10.0.1.0/24) |Zenarmor, Wazuh agent                            |
| **Server 2: AD/DC**      | Active Directory, DC, DNS, DHCP, NPS (RADIUS)                | Windows Server 2019 | Active Directory, DNS, DHCP                       | VM         | 10.0.1.20          | Admin_VLAN (10.0.1.0/24) | Wazuh agent, Windows Defender          |
| **Server 3: Wazuh + ELK**| Wazuh Manager, Elasticsearch, Kibana, Logstash               | Ubuntu Server 20.04 | Log collection, indexing, and SIEM.               | VM     | 10.0.2.10          | SOC_VLAN (10.0.2.0/24) | Wazuh agent, ClamAV                    |
|                         | Wazuh                                                         |                     |                                                   | Docker           | 10.0.2.11          |                       |                                       |
|                         | Kibana                                                        |                     |                                                   | Docker            | 10.0.2.12          |                       |                                       |
|                         | Logstash                                                      |                     |                                                   | Docker           | 10.0.2.13          |                       |                                       |
|                         | Elasticsearch                                                 |                     |                                                   | Docker           | 10.0.2.14          |                       |                                       |
| **Server 4: The Hive Stack**| The Hive, Cortex, MISP                                       | Ubuntu Server 20.04 | Incident response and threat intelligence.        | VM     | 10.0.2.20          | SOC_VLAN (10.0.2.0/24) | Wazuh agent, ClamAV                    |
|                         | MISP                                                          |                     |                                                   | Docker           | 10.0.2.21          |                       |                                       |
|                         | Cortex                                                        |                     |                                                   | Docker           | 10.0.2.25          |                       |                                       |
|                         | The Hive                                                      |                     |                                                   | Docker           | 10.0.2.30          |                       |                                       |
| **Server 5: OpenVAS + Zeek**| OpenVAS Vulnerability Scanner (during scans), Zeek Network Monitoring | Ubuntu Server 20.04 | Vulnerability scanning, Network monitoring and traffic analysis | Docker     | 10.0.2.35          | SOC_VLAN (10.0.2.0/24) | Wazuh agent, ClamAV                    |
|                         | OpenVAS                                                       |                     |                                                   |            | 10.0.2.36          |                       |                                       |
|                         | Zeek                                                          |                     |                                                   |            | 10.0.2.37          |                       |                                       |
| **Server 7: Web + SQL**  | Web Server (Apache), SQL Server, ModSecurity                 |                     | Web server (Apache/Nginx), SQL (MySQL/PostgreSQL), and potential email server. | VM     | 10.0.3.10          | DMZ_VLAN (10.0.3.0/24) | Wazuh agent, ClamAV                    |
|                         | Apache                                                        |                     |                                                   | Docker           | 10.0.3.11          |                       |                                       |
|                         | MySQL                                                         |                     |                                                   | Docker           | 10.0.3.12          |                       |                                       |
|                         | IRedMail                                                      |                     |                                                   | Docker           | 10.0.3.13          |                       |                                       |
| **Server 8: Windows VM** | Vulnerable Windows VM                                        | Windows 10          | Intentionally vulnerable Windows system for testing. | VM         | 10.0.4.10          | Lab_VLAN (10.0.4.0/24)  | Wazuh agent, Windows Defender           |
| **Server 9: Ubuntu VM**  | Vulnerable Ubuntu VM                                         | Ubuntu              | Intentionally vulnerable Ubuntu system for testing. | VM         | 10.0.4.20          | Lab_VLAN (10.0.4.0/24)  | Wazuh agent, ClamAV                    |
|                         | Additional VMs as necessary                                  |                     |                                                   |            | 10.0.4.100-200 DHCP |                       |                                       |
| **Server 10: Kali Linux**| Full Kali Linux VM (offensive security tools)                | Kali Linux          | Penetration testing or adversary simulation.      | VM         | 10.0.5.10          | RT_VLAN (10.0.5.0/24)  |                                       |
| **Server 11: Caldera**   | Adversary simulation (Caldera)                               | Ubuntu Server 20.05 | Penetration testing or adversary simulation.      | VM         | 10.0.5.15          | RT_VLAN (10.0.5.0/24)  |                                       |
|                         | Additional VMs as necessary                                  |                     |                                                   |            | 10.0.5.100-200 DHCP |                       |                                       |
